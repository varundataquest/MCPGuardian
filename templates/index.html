<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>MCP Registry Harvester</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <header>
    <h1>MCP Registry Harvester</h1>
    <nav>
      <a href="/">Search</a>
      <a href="/clusters/page">Clusters</a>
      <a href="/discover/page">Discover</a>
      <a href="/recommend/page">Recommend</a>
    </nav>
  </header>
  <main>
    <form method="get" action="/">
      <input type="text" name="q" placeholder="Search (e.g. python gmail)" value="{{ q }}" />
      <select name="runtime">
        <option value="">Any runtime</option>
        {% for r in ['python','node','go','docker-image','other','unknown'] %}
        <option value="{{ r }}" {% if runtime==r %}selected{% endif %}>{{ r }}</option>
        {% endfor %}
      </select>
      <button type="submit">Search</button>
    </form>

    {% if results %}
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Runtime</th>
          <th>Registries</th>
          <th>Install</th>
          <th>Score</th>
        </tr>
      </thead>
      <tbody>
        {% for r in results %}
        <tr>
          <td><a href="/servers/{{ r['server_id'] }}">{{ r['display_name'] or r['server_id'] }}</a></td>
          <td>{{ r['runtime'] }}</td>
          <td>{{ r['registries_seen_in'] }}</td>
          <td><code>{{ r['install'] }}</code></td>
          <td>{{ '%.3f'|format(r['_score']) }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% endif %}
  </main>
</body>
</html>
