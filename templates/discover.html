<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Discover - MCP Registry Harvester</title>
  <link rel="stylesheet" href="/static/style.css" />
  <style>
    table td code { white-space: nowrap; }
  </style>
</head>
<body>
  <header>
    <h1>Discover</h1>
    <nav>
      <a href="/">Search</a>
      <a href="/clusters/page">Clusters</a>
      <a href="/discover/page">Discover</a>
    </nav>
  </header>
  <main>
    <form method="get" action="/discover/page">
      <input type="text" name="q" placeholder="Try: gmail, drive, jira, notion, postgres" value="{{ q }}" />
      <input type="number" min="1" name="k" value="{{ k }}" />
      <button type="submit">Discover</button>
    </form>
    {% if results %}
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>SDK</th>
          <th>Transports</th>
          <th>Score</th>
          <th>Repo</th>
        </tr>
      </thead>
      <tbody>
        {% for r in results %}
        <tr>
          <td>{{ r['name'] }}</td>
          <td>{{ r['sdk'] }}</td>
          <td>{{ ','.join(r.get('transports') or []) }}</td>
          <td>{{ '%.2f'|format(r['score']) }}</td>
          <td>{% if r.get('repo_url') %}<a href="{{ r['repo_url'] }}" target="_blank">repo</a>{% endif %}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% endif %}
  </main>
</body>
</html>
